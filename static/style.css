/* 基础颜色变量 */
:root {
  --primary-50: #eff6ff;
  --primary-100: #dbeafe;
  --primary-200: #bfdbfe;
  --primary-300: #93c5fd;
  --primary-400: #60a5fa;
  --primary-500: #3b82f6;
  --primary-600: #2563eb;
  --primary-700: #1d4ed8;
  --primary-800: #1e40af;
  --primary-900: #1e3a8a;
  
  --accent-500: #10b981;
  --accent-600: #059669;
  
  --danger-500: #dc2626;
  --danger-600: #b91c1c;
  
  --gray-50: #f9fafb;
  --gray-100: #f3f4f6;
  --gray-200: #e5e7eb;
  --gray-300: #d1d5db;
  --gray-400: #9ca3af;
  --gray-500: #6b7280;
  --gray-600: #4b5563;
  --gray-700: #374151;
  --gray-800: #1f2937;

  /* 阴影变量 */
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
  --shadow-md: 0 4px 6px rgba(0,0,0,0.07);
  --shadow-lg: 0 10px 15px rgba(0,0,0,0.1);

  /* 字体变量 */
  --font-sans: "Microsoft YaHei", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-mono: "JetBrains Mono", Consolas, "Courier New", monospace;
  
  /* 字体大小变量 */
  --text-xs: 12px;
  --text-sm: 14px;
  --text-base: 16px;
  --text-lg: 18px;
  --text-xl: 20px;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: var(--font-sans);  /* 默认字体 */
}

body, html {
  height: 100%;
  font-family: var(--font-sans);
  background: var(--gray-50);
  color: var(--gray-800);
  font-size: var(--text-base);
}

body {
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* 头部样式优化 */
.header {
  background: linear-gradient(135deg, var(--primary-900), var(--primary-700));
  color: white;
  position: relative;
  display: flex;
  align-items: center;
  padding: 10px;
  flex: 0 0 auto;
  justify-content: flex-start;
  box-shadow: var(--shadow-lg);
  gap: 1rem;  /* 添加间距 */
}

.sort-container {
  font-size: var(--text-base);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.search-container {
  display: flex;
  align-items: center;
  margin: 0 auto;
}

.search-container input {
  padding: 6px;
  border-radius: 10px;
  border: none;
  font-size: var(--text-base);
  font-family: var(--font-sans);
  margin-right: 10px;
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(10px);
  color: white;
  transition: all 0.3s ease;
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
}

.search-container input::placeholder {
  color: rgba(255,255,255,0.7);
}

.search-container input:focus {
  background: white;
  color: var(--gray-800);
  outline: none;
  box-shadow: 0 0 0 3px var(--primary-100);
}

/* 按钮基础样式 */
.btn {
  padding: 6px 12px;
  border-radius: 6px;
  border: none;
  font-size: var(--text-base);
  font-family: var(--font-sans);
  font-weight: 500;
  cursor: pointer;
  margin-left: 10px;
  transition: all 0.2s ease;
  box-shadow: var(--shadow-sm);
  background: var(--gray-100);
  color: var(--gray-800);
  border: 1px solid var(--gray-300);
  text-decoration: none !important;
}

.btn:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
  background: var(--gray-200);
}

/* 主要操作按钮 (新建、上传、保存等) */
.btn.primary {
  background: var(--primary-600);
  color: white;
  border: none;
}

.btn.primary:hover {
  background: var(--primary-700);
}

/* 打开/查看按钮 */
.open-button {
  background: var(--accent-500);
  color: white;
  border: none;
}

.open-button:hover {
  background: var(--accent-600);
}

/* 删除按钮 */
.btn.danger {
  background: var(--danger-500);
  color: white;
  border: none;
}

.btn.danger:hover {
  background: var(--danger-600);
}

/* 重命名按钮 */
.rename-button {
  background: var(--gray-600);
  color: white;
  border: none;
}

.rename-button:hover {
  background: var(--gray-600);
}

/* 下载按钮 */
.btn[href*="download"] {
  background: var(--primary-600);
  color: white;
  border: none;
}

.btn[href*="download"]:hover {
  background: var(--primary-600);
}

/* 取消按钮 */
.modal-buttons .btn:not(.primary) {
  background: var(--gray-100);
  color: var(--gray-700);
  border: 1px solid var(--gray-300);
}

.modal-buttons .btn:not(.primary):hover {
  background: var(--gray-200);
}

/* 头部按钮组样式优化 */
.header .btn {
  background: rgba(255, 255, 255, 0.15);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(4px);
}

.header .btn:hover {
  background: rgba(255, 255, 255, 0.2);
}

.header .btn.primary {
  background: var(--accent-500);
  border: none;
}

.header .btn.primary:hover {
  background: var(--accent-600);
}

/* 返回按钮 */
.back-button {
  background: var(--gray-100);
  color: var(--gray-700);
  border: 1px solid var(--gray-300);
}

.back-button:hover {
  background: var(--gray-200);
  transform: translateX(-4px);
}

/* 模态框按钮组样式 */
.modal-buttons .btn {
  min-width: 100px;
  padding: 8px 16px;
}

/* 主体布局 */
.main {
  flex: 1 1 auto;
  display: flex;
  overflow: hidden;
}

/* 左侧面板 */
.left-panel {
  width: 35%;
  background: white;
  font-size: var(--text-base);
  border-right: 1px solid var(--gray-200);
  box-shadow: 2px 0 5px rgba(0,0,0,0.03);
  display: flex;
  flex-direction: column;  /* 垂直布局 */
  height: 100%;
}

/* 固定在顶部的操作区域 */
.operations-area {
  padding: 0.75rem;
  background: white;
  border-bottom: 1px solid var(--gray-200);
  flex-shrink: 0;  /* 防止内容压缩 */
}

/* 可滚动的文件列表区域 */
.files-area {
  flex: 1;
  overflow-y: auto;
  padding: 0.75rem;
}

/* 滚动条样式保持不变 */
.files-area::-webkit-scrollbar {
  width: 8px;
}

.files-area::-webkit-scrollbar-track {
  background: var(--gray-100);
  border-radius: 4px;
}

.files-area::-webkit-scrollbar-thumb {
  background: var(--gray-300);
  border-radius: 4px;
}

.files-area::-webkit-scrollbar-thumb:hover {
  background: var(--gray-400);
}

/* 美化滚动条 */
.left-panel::-webkit-scrollbar {
  width: 8px;
}

.left-panel::-webkit-scrollbar-track {
  background: var(--gray-100);
  border-radius: 4px;
}

.left-panel::-webkit-scrollbar-thumb {
  background: var(--gray-300);
  border-radius: 4px;
}

.left-panel::-webkit-scrollbar-thumb:hover {
  background: var(--gray-400);
}

/* 文件夹导航美化 */
.folder-nav {
  margin-bottom: 1.5rem;
}

.back-button {
  width: 100%;
  padding: 1rem;
  background: var(--gray-50);
  border: 1px solid var(--gray-200);
  border-radius: 12px;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  transition: all 0.2s ease;
}

.back-button:before {
  content: "←";
  font-size: 1.2em;
}

.back-button:hover {
  background: var(--primary-50);
  border-color: var(--primary-200);
  transform: translateX(-4px);
}

/* 批量操作区域美化 */
.batch-operations {
  background: var(--gray-50);
  padding: 1rem;
  border-radius: 12px;
  margin-bottom: 1.5rem;
  display: flex;
  flex-direction: row;
  gap: 0.5rem;
  justify-content: space-between;
}

/* 批量操作按钮样式 */
.batch-operations .btn {
  flex: 1;
  padding: 0.5rem;
  white-space: nowrap;
  text-align: center;
  font-size: var(--text-sm);
}

.batch-operations form {
  display: flex;
  gap: 0.5rem;
  align-items: center;
}

/* 文件列表美化 */
.file-item {
  background: white;
  padding: 0.75rem;
  border-radius: 12px;
  border: 2px solid transparent;
  margin-bottom: 0.5rem;
  transition: all 0.2s ease;
  box-shadow: var(--shadow-sm);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.file-item:hover {
  border-color: var(--primary-200);
  transform: translateX(4px);
  box-shadow: var(--shadow-md);
}

.file-item.selected {
  background: var(--primary-50);
  border-color: var(--primary-300);
}

/* 文件信息布局优化 */
.file-info {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  flex: 1;
  min-width: 0;
}

.file-name {
  font-size: var(--text-base);
  font-weight: 500;
  color: var(--gray-800);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.file-meta {
  font-size: var(--text-sm);
  color: var(--gray-500);
}

/* 文件操作按钮组 */
.file-actions {
  display: flex;
  flex-direction: row;
  gap: 0.5rem;
  align-items: center;
  flex-shrink: 0;
}

.file-actions .btn {
  margin: 0;
  padding: 0.5rem 1rem;
  white-space: nowrap;
  height: fit-content;
}

/* 个人文件用户名输入框样式 */
.file-actions .input-text.short-input {
  width: 120px;
  padding: 0.5rem;
  margin: 0;
  height: fit-content;
}

/* 删除表单样式 */
.file-actions form {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin: 0;
}

/* 上传模态框优化 */
.modal-content {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

/* 拖拽上传区域独立 */
.upload-area {
  border: 3px dashed var(--gray-300);
  border-radius: 16px;
  padding: 3rem 2rem;
  text-align: center;
  background: var(--gray-50);
  transition: all 0.3s ease;
  cursor: pointer;
}

/* 上传选项区域 */
.upload-options {
  background: white;
  padding: 1.5rem;
  border-radius: 12px;
  border: 1px solid var(--gray-200);
}

.owner-type-section {
  margin-bottom: 1.5rem;
}

.section-title {
  font-size: var(--text-base);
  color: var(--gray-700);
  margin-bottom: 1rem;
}

.owner-type {
  display: flex;
  gap: 2rem;
  padding: 1rem;
  background: var(--gray-50);
  border-radius: 8px;
}

#upload_owner_input {
  padding: 1rem;
  background: var(--primary-50);
  border-radius: 8px;
  border-left: 4px solid var(--primary-400);
}

/* 文件预览区域美化 */
.file-preview {
  background: white;
  padding: 1.5rem;
  border-radius: 12px;
  border: 1px solid var(--gray-200);
}

.preview-title {
  font-size: var(--text-base);
  color: var(--gray-700);
  margin-bottom: 1rem;
}

.preview-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem;
  background: var(--gray-50);
  border-radius: 8px;
  margin-bottom: 0.5rem;
}

/* 右侧面板 */
.right-panel {
  width: 65%;
  padding: 20px;
  overflow: auto;
  background: white;
  font-size: var(--text-base);
  display: flex;
  flex-direction: column;
}

/* Markdown内容样式 */
.md-content {
  background: white;
  border: 1px solid var(--gray-200);
  padding: 20px;
  border-radius: 12px;
  font-size: var(--text-base);
  font-family: var(--font-sans);
  line-height: 1.8;
  box-shadow: var(--shadow-sm);
  
  /* 代码块样式 */
  pre {
    background: var(--gray-50);
    padding: 1rem;
    border-radius: 8px;
    overflow-x: auto;
  }
  
  code {
    font-family: var(--font-mono);
    font-size: 0.9em;
    padding: 0.2em 0.4em;
    background: var(--gray-100);
    border-radius: 4px;
  }
  
  /* 表格样式 */
  table {
    border-collapse: collapse;
    width: 100%;
    margin: 1rem 0;
  }
  
  th, td {
    border: 1px solid var(--gray-200);
    padding: 0.5rem;
    text-align: left;
  }
  
  th {
    background: var(--gray-50);
  }
  
  /* 图片样式 */
  img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    margin: 1rem 0;
  }
  
  /* 引用样式 */
  blockquote {
    border-left: 4px solid var(--primary-300);
    margin: 1rem 0;
    padding: 0.5rem 1rem;
    background: var(--primary-50);
    border-radius: 4px;
  }
  
  /* 列表样式 */
  ul, ol {
    padding-left: 2rem;
    margin: 1rem 0;
  }
  
  /* 标题样式 */
  h1, h2, h3, h4, h5, h6 {
    margin: 1.5rem 0 1rem;
    line-height: 1.4;
  }
  
  /* 链接样式 */
  a {
    color: var(--primary-600);
    text-decoration: none;
  }
  
  a:hover {
    text-decoration: underline;
  }
  
  /* 水平线样式 */
  hr {
    border: none;
    height: 1px;
    background: var(--gray-200);
    margin: 2rem 0;
  }
  
  /* 代码高亮 */
  .highlight {
    background: var(--gray-50);
    border-radius: 8px;
    margin: 1rem 0;
  }
  
  .highlight pre {
    padding: 1rem;
    overflow-x: auto;
  }
  
  /* 脚注样式 */
  .footnote {
    font-size: 0.9em;
    color: var(--gray-500);
  }
}

/* 编辑器容器样式 */
.editor-container {
  display: flex;
  flex-direction: column;
  height: calc(100vh - 200px);  /* 减去头部和其他元素的高度 */
  margin-top: 20px;
}

/* 编辑器样式 */
.textarea {
  width: 100%;
  flex: 1;  /* 让文本框占据剩余空间 */
  min-height: 500px;  /* 最小高度 */
  padding: 20px;
  border: 2px solid var(--gray-200);
  border-radius: 12px;
  font-size: var(--text-base);
  font-family: var(--font-mono);
  line-height: 1.6;
  resize: vertical;  /* 允许垂直调整大小 */
  transition: all 0.2s ease;
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
}

.textarea:focus {
  border-color: var(--primary-400);
  outline: none;
  box-shadow: 0 0 0 3px var(--primary-100);
}

/* 编辑表单样式 */
#edit_form {
  display: flex;
  flex-direction: column;
  height: 100%;  /* 占满容器高度 */
  gap: 1rem;
}

/* 分割线美化 */
hr {
  border: none;
  height: 2px;
  background: linear-gradient(to right, var(--gray-200), transparent);
  margin: 20px 0;
}

/* 底部样式 */
.footer {
  background: var(--gray-800);
  color: white;
  text-align: center;
  padding: 20px;
  font-size: var(--text-sm);
  box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
}

/* 响应式调整保持不变 */
@media (max-width: 1000px) {
  .main {
    flex-direction: column;
  }
  .left-panel, .right-panel {
    width: 100%;
    max-width: none;
  }
  .header {
    padding: 1rem;
  }
  .btn {
    padding: 0.4rem 0.8rem;
    font-size: var(--text-sm);
  }
  .left-panel {
    max-height: 45vh;
  }
  .right-panel {
    max-height: 55vh;
  }
  
  body {
    font-size: var(--text-sm);
  }
  
  .header .logo {
    font-size: var(--text-lg);
  }
  
  /* 移动端按钮样式优化 */
  .file-actions {
    justify-content: flex-start;
    gap: 0.3rem;
  }
  
  .file-actions .btn {
    padding: 0.3rem 0.8rem;
    font-size: var(--text-sm);
  }
}

/* 统一的模态框基础样式 */
.modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(5px);
  z-index: 1000;
  justify-content: center;
  align-items: center;
}

/* 模态框内容区域 */
.modal-content {
  background: white;
  padding: 2.5rem;
  border-radius: 16px;
  width: 90%;
  max-width: 600px;
  box-shadow: var(--shadow-lg);
  animation: modalShow 0.3s ease;
  position: relative;
  max-height: 90vh;
  overflow-y: auto;
}

/* 消息内容样式 */
.message-content {
  margin: 1.5rem 0;
  padding: 1rem;
  background: var(--gray-50);
  border-radius: 8px;
  font-size: var(--text-base);
  line-height: 1.5;
}

/* 输入组样式 */
.input-group {
  margin-bottom: 1.5rem;
}

.input-group label {
  display: block;
  margin-bottom: 0.5rem;
  color: var(--gray-700);
  font-weight: 500;
}

.input-group .input-text {
  width: 100%;
  padding: 0.75rem 1rem;
  border: 2px solid var(--gray-200);
  border-radius: 8px;
  font-size: var(--text-base);
  transition: all 0.2s ease;
}

/* 上传区域样式优化 */
.upload-area {
  border: 3px dashed var(--gray-300);
  border-radius: 16px;
  padding: 3rem 2rem;
  text-align: center;
  background: var(--gray-50);
  transition: all 0.3s ease;
  cursor: pointer;
  margin-bottom: 2rem;
}

.upload-area:hover,
.upload-area.dragover {
  border-color: var(--primary-400);
  background: var(--primary-50);
}

/* 按钮组样式 */
.modal-buttons {
  display: flex;
  justify-content: flex-end;
  gap: 1rem;
  margin-top: 2rem;
}

.modal-buttons .btn {
  min-width: 100px;
  padding: 8px 16px;
}

/* 文件类型选择区域 */
.owner-type-section {
  background: var(--gray-50);
  padding: 1.5rem;
  border-radius: 12px;
  margin-bottom: 1.5rem;
}

/* 用户名输入区域 */
#new_file_owner_input,
#upload_owner_input {
  padding: 1.5rem;
  background: var(--primary-50);
  border-radius: 12px;
  border-left: 4px solid var(--primary-400);
  margin-bottom: 1.5rem;
}

/* 模态框动画 */
@keyframes modalShow {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* 模态框标题 */
.modal h2 {
  font-size: var(--text-lg);
  color: var(--gray-800);
  text-align: center;
  margin-bottom: 2rem;
  font-weight: 600;
}

/* 文件输入框隐藏 */
.file-input {
  display: none;
}

/* 上传进度条 */
.upload-progress {
  margin-top: 1.5rem;
  display: none;
}

.progress-bar {
  height: 8px;
  background: var(--gray-200);
  border-radius: 4px;
  overflow: hidden;
  margin-top: 0.5rem;
}

.progress-bar-fill {
  height: 100%;
  background: var(--primary-500);
  width: 0%;
  transition: width 0.3s ease;
}

/* 文件预览区域 */
.file-preview {
  margin-top: 1.5rem;
  display: none;
}

.preview-item {
  display: flex;
  justify-content: space-between;
  padding: 0.75rem;
  background: white;
  border: 1px solid var(--gray-200);
  border-radius: 8px;
  margin-bottom: 0.5rem;
}

.preview-item-name {
  color: var(--gray-800);
}

.preview-item-size {
  color: var(--gray-500);
  font-size: var(--text-sm);
}

/* 模态框按钮 */
.modal-buttons {
  margin-top: 2rem;
  display: flex;
  justify-content: flex-end;
  gap: 1rem;
}

/* 重命名表单样式优化 */
.rename-form {
  position: absolute;
  right: 1.5rem;
  background: white;
  padding: 1rem;
  border-radius: 8px;
  box-shadow: var(--shadow-md);
  z-index: 10;
}

/* 文件夹样式特殊处理 */
.folder-item .file-name {
  color: var(--primary-600);
  font-weight: 600;
}

.folder-item .file-icon {
  color: var(--primary-500);
}

/* 文件图标样式 */
.file-icon {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  margin-right: 0.5rem;
  flex-shrink: 0;
  border-radius: 5px;
}

/* 文件夹图标 */
.folder-item .file-icon {
  color: var(--primary-600);
  background: var(--primary-50);
}

/* Markdown文件图标 */
.file-item[data-ext=".md"] .file-icon {
  color: var(--accent-600);
  background: var(--accent-50);
}

/* 文本文件图标 */
.file-item[data-ext=".txt"] .file-icon,
.file-item[data-ext=".log"] .file-icon {
  color: var(--gray-600);
  background: var(--gray-100);
}

/* 图片文件图标 */
.file-item[data-ext=".jpg"] .file-icon,
.file-item[data-ext=".jpeg"] .file-icon,
.file-item[data-ext=".png"] .file-icon,
.file-item[data-ext=".gif"] .file-icon {
  color: #ff9800;
  background: #fff3e0;
}

/* 文档文件图标 */
.file-item[data-ext=".doc"] .file-icon,
.file-item[data-ext=".docx"] .file-icon,
.file-item[data-ext=".pdf"] .file-icon {
  color: #e53935;
  background: #ffebee;
}

/* 表格文件图标 */
.file-item[data-ext=".xls"] .file-icon,
.file-item[data-ext=".xlsx"] .file-icon,
.file-item[data-ext=".csv"] .file-icon {
  color: #2e7d32;
  background: #e8f5e9;
}

/* 压缩文件图标 */
.file-item[data-ext=".zip"] .file-icon,
.file-item[data-ext=".rar"] .file-icon,
.file-item[data-ext=".7z"] .file-icon {
  color: #6d4c41;
  background: #efebe9;
}

/* 其他文件图标 */
.file-item:not([data-ext]) .file-icon {
  color: var(--gray-500);
  background: var(--gray-100);
}

/* 文件夹操作区域样式 */
.folder-ops {
  display: none;
}

/* 链接按钮样式 */
a.btn {
  display: inline-block;
  text-decoration: none !important;
}

a.btn:hover {
  text-decoration: none !important;
}

/* 重命名模态框样式 */
.rename-input-group {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.extension-label {
    color: var(--gray-600);
    font-family: var(--font-mono);
    padding: 0.75rem 0;
}

/* 确保输入框和扩展名标签在同一行 */
.rename-input-group .input-text {
    flex: 1;
    margin: 0;
}
